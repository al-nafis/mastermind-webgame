function play(){navigate(welcomeMenu,mainMenu,NavigationStyle.FADE),backgroundMusic.loop=!0,backgroundMusic.play()}function newGame(){navigate(mainMenu,newGameMenu,NavigationStyle.SWIPE_LEFT)}function options(){navigate(mainMenu,optionsMenu,NavigationStyle.SWIPE_LEFT),musicStatus?updateSoundUiOn():updateSoundUiOff()}function back(){navigate(newGameMenu,mainMenu,NavigationStyle.SWIPE_RIGHT),navigate(optionsMenu,mainMenu,NavigationStyle.SWIPE_RIGHT)}function soundOn(){musicStatus||(updateSoundUiOn(),musicStatus=!0,backgroundMusic.play())}function soundOff(){musicStatus&&(updateSoundUiOff(),musicStatus=!1,backgroundMusic.load())}function startGame(e){game=new Game(e),navigate(menuScreen,loadingScreen,NavigationStyle.FADE),setTimeout(function(){navigate(loadingScreen,gameScreen,NavigationStyle.FADE),back(),setupGameScreen()},loadingDuration)}function setupGameScreen(){musicStatus?soundImg.src="images/unmute.png":soundImg.src="images/mute.png",updateContentText(difficultyLevelDisplay,game.difficultyLevel),displayBlock(codeMakerPaletteOverlay),setTimeout(function(){for(let e=0;e<game.codeMaker.length;e++){const e=createDiv();addClass(e,"code-maker-color-peg"),updateBackgroundColor(e,getRandomColor()),codeMakerPalette.appendChild(e),codeMakerCodePegs.push(e)}const e=setInterval(animateCodemakerPalette,animationDurationSlow/5);animate(codeMakerPaletteOverlay,AnimationStyle.PALETTE_SLIDE_IN),setTimeout(function(){clearInterval(e);for(let e=0;e<game.codeMaker.length;e++)updateBackgroundColor(codeMakerCodePegs[e],game.codeMaker[e])},animationDurationSlow)},animationDuration),setupInitialGuessRow()}function setupInitialGuessRow(){currentRowCodePegs=[],currentRowKeyPegsHolder=[],game.currentCodeBreakerPattern=[];const e=createDiv();addClass(e,"row"),guesses.prepend(e),guessCodeRows.push(e);const t=createDiv();addClass(t,"attempt-number"),e.appendChild(t);const o=createDiv();o.textContent=game.attempt,t.appendChild(o);const a=createDiv();addClass(a,"guess-palette"),e.appendChild(a);for(let e=0;e<game.codeMaker.length;e++){const e=createDiv();game.difficultyLevel==Difficulty.ENGINEER?addClass(e,"code-peg-holder-6pegs"):addClass(e,"code-peg-holder-4pegs"),a.appendChild(e);const t=createDiv();updateBackgroundColor(t,emptyPegColor),e.appendChild(t),currentRowCodePegs.push(t)}const n=createDiv();addClass(n,"feedback-holder"),e.appendChild(n);const i=createDiv();n.appendChild(i);let l=2;game.difficultyLevel==Difficulty.ENGINEER&&(l=3);for(let e=0;e<2;e++){const e=createDiv();i.appendChild(e);for(let t=0;t<l;t++){const t=createDiv();addClass(t,"key-peg-holder"),e.appendChild(t),currentRowKeyPegsHolder.push(t)}}}function onClickCodePeg(e){let t=!0;for(let o=0;o<currentRowCodePegs.length;o++){if(game.difficultyLevel==Difficulty.BEGINNER&&currentRowCodePegs[o].style.backgroundColor==e){showDialog(DialogCases.DUPLICATES),t=!1;break}if(currentRowCodePegs[o].style.backgroundColor==emptyPegColor){updateBackgroundColor(currentRowCodePegs[o],e),game.currentCodeBreakerPattern.push(e),t=!1;break}}t&&showDialog(DialogCases.PEGS_FILLED)}function breakCode(){let e=!0;for(let t=0;t<currentRowCodePegs.length;t++)currentRowCodePegs[t].style.backgroundColor==emptyPegColor&&(e=!1);if(e){const e=game.getFeedback();for(let t=0;t<e.length;t++){const o=createDiv();updateBackgroundColor(o,e[t]),currentRowKeyPegsHolder[t].appendChild(o)}game.isGameOver()&&game.userWon?(animate(codeMakerPaletteOverlay,AnimationStyle.PALETTE_SLIDE_OUT),setTimeout(function(){displayNone(codeMakerPaletteOverlay),showDialog(DialogCases.GAME_OVER_WIN)},animationDurationSlow),disablePaletteAndButtons(!0)):game.isGameOver()&&!game.userWon?(animate(codeMakerPaletteOverlay,AnimationStyle.PALETTE_SLIDE_OUT),setTimeout(function(){displayNone(codeMakerPaletteOverlay),showDialog(DialogCases.GAME_OVER_LOSE)},animationDurationSlow),disablePaletteAndButtons(!0)):(game.attempt++,setupInitialGuessRow(),guesses.scrollTop=0)}else showDialog(DialogCases.PEG_NOT_FILLED)}function clearRow(){currentRowCodePegs.forEach(function(e){updateBackgroundColor(e,emptyPegColor)}),game.currentCodeBreakerPattern=[]}function toggleSound(){musicStatus?(musicStatus=!1,backgroundMusic.load(),soundImg.src="images/mute.png"):(musicStatus=!0,backgroundMusic.play(),soundImg.src="images/unmute.png")}function onClickHtpButton(){animate(howToPlay,AnimationStyle.FADE_IN),viewById("htp-body").scrollTop=0}function closeHtp(){animate(howToPlay,AnimationStyle.FADE_OUT)}function onClickQuitButton(){showDialog(DialogCases.QUIT_GAME)}function onClickRestartButton(){showDialog(DialogCases.RESTART_GAME)}function adjustGuessesHeight(){const e=window.outerHeight;guesses.style.maxHeight=e<750?e-283+"px":"465px"}function closeDialog(){animate(dialogBox,AnimationStyle.FADE_OUT),setTimeout(function(){updateContentText(dialogTitle,""),updateContentText(dialogBody,""),updateContentText(dialogQuitBtn,""),updateContentText(dialogRestartBtn,""),displayBlock(dialogCloseBtn),displayNone(dialogHeader),displayNone(dialogRestartBtn),displayNone(dialogReviewBtn),displayNone(dialogQuitBtn),displayNone(dialogButtons)},animationDuration)}function disablePaletteAndButtons(e){let t;t=e?"none":"auto",viewById("color-red").style.pointerEvents=t,viewById("color-blue").style.pointerEvents=t,viewById("color-green").style.pointerEvents=t,viewById("color-yellow").style.pointerEvents=t,viewById("color-white").style.pointerEvents=t,viewById("color-black").style.pointerEvents=t,viewById("break-btn").disabled=e,viewById("clear-btn").disabled=e}function resetGameScreen(){updateContentText(difficultyLevelDisplay,""),codeMakerPaletteOverlay.style.transform="translateX(-100%)";for(let e=0;e<codeMakerCodePegs.length;e++)codeMakerCodePegs[e].remove();codeMakerCodePegs=[];for(let e=0;e<guessCodeRows.length;e++)guessCodeRows[e].remove();guessCodeRows=[]}function reviewGame(){closeDialog(),disablePaletteAndButtons(!0)}function restartGame(){disablePaletteAndButtons(!1),resetGameScreen(),closeDialog(),navigate(gameScreen,loadingScreen,NavigationStyle.FADE),setTimeout(function(){navigate(loadingScreen,gameScreen,NavigationStyle.FADE);const e=game.difficultyLevel;game=new Game(e),setupGameScreen()},loadingDuration)}function quitGame(){disablePaletteAndButtons(!1),resetGameScreen(),closeDialog(),navigate(gameScreen,loadingScreen,NavigationStyle.FADE),setTimeout(function(){navigate(loadingScreen,menuScreen,NavigationStyle.FADE)},loadingDuration)}window.onload=function(){welcomeMenu=viewById("welcome-menu"),mainMenu=viewById("main-menu"),newGameMenu=viewById("new-game-menu"),optionsMenu=viewById("options-menu"),menuScreen=viewById("menu-screen"),gameScreen=viewById("game-screen"),loadingScreen=viewById("loading-screen"),dialogBox=viewById("dialog-box"),soundOnBtn=viewById("sound-on-btn"),soundOffBtn=viewById("sound-off-btn"),howToPlay=viewById("how-to-play"),difficultyLevelDisplay=viewById("difficulty-level-display"),codeMakerPalette=viewById("code-maker-palette"),codeMakerPaletteOverlay=viewById("code-maker-palette-overlay"),soundImg=viewById("game-sound-btn"),guesses=viewById("guesses"),dialogHeader=viewById("dialog-header"),dialogTitle=viewById("dialog-title"),dialogCloseBtn=viewById("dialog-close-btn"),dialogBody=viewById("dialog-body"),dialogButtons=viewById("dialog-buttons"),dialogRestartBtn=viewById("dialog-restart-btn"),dialogQuitBtn=viewById("dialog-quit-btn"),dialogReviewBtn=viewById("dialog-review-btn"),displayNone(mainMenu),displayNone(newGameMenu),displayNone(optionsMenu),displayNone(gameScreen),displayNone(dialogBox),textColor=document.getElementsByTagName("body")[0].style.color,backgroundMusic.preload="auto",adjustGuessesHeight(),setTimeout(function(){displayFlex(document.getElementsByTagName("main")[0])},1e3)},window.onresize=function(){setTimeout(adjustGuessesHeight(),100)};