function getId(e){return document.getElementById(e)}function createDiv(){return document.createElement("DIV")}function displayNone(e){e.style.display="none"}function displayBlock(e){e.style.display="block"}function displayFlex(e){e.style.display="flex"}function addClass(e,n){e.classList.add(n)}function updateBackgroundColor(e,n){e.style.backgroundColor=n}function updateContentText(e,n){e.textContent=n}function updateSoundUiOn(){soundOffBtn.style.color=textColor,soundOffBtn.style.cursor="pointer",soundOnBtn.style.color=textColorDisabled,soundOnBtn.style.cursor="default"}function updateSoundUiOff(){soundOnBtn.style.color=textColor,soundOnBtn.style.cursor="pointer",soundOffBtn.style.color=textColorDisabled,soundOffBtn.style.cursor="default"}function play(){displayNone(welcomeMenu),displayBlock(mainMenu),backgroundMusic.loop=!0,backgroundMusic.play()}function newGame(){displayNone(mainMenu),displayBlock(newGameMenu)}function options(){displayNone(mainMenu),displayBlock(optionsMenu),musicStatus?updateSoundUiOn():updateSoundUiOff()}function credits(){displayNone(mainMenu),displayBlock(creditsMenu)}function back(){displayNone(newGameMenu),displayNone(optionsMenu),displayNone(creditsMenu),displayBlock(mainMenu)}function soundOn(){musicStatus||(updateSoundUiOn(),musicStatus=!0,backgroundMusic.play())}function soundOff(){musicStatus&&(updateSoundUiOff(),musicStatus=!1,backgroundMusic.load())}function startGame(e){game=new Game(e),back(),displayNone(menuScreen),displayBlock(gameScreen),setupGameScreen()}function setupGameScreen(){for(let e=0;e<game.codeMaker.length;e++){const n=createDiv();addClass(n,"color-pegs-4"),updateBackgroundColor(n,game.codeMaker[e]),codeMakerPalette.appendChild(n)}setupInitialGuessRow()}function setupInitialGuessRow(){currentRowCodePegs=[],currentRowKeyPegsHolder=[];const e=createDiv();addClass(e,"row"),guesses.prepend(e);const n=createDiv();addClass(n,"attempt-number"),e.appendChild(n);const o=createDiv();o.textContent=game.attempt,n.appendChild(o);const t=createDiv();addClass(t,"guess-palette"),e.appendChild(t);for(let e=0;e<game.codeMaker.length;e++){const e=createDiv();game.difficultyLevel==Difficulty.ENGINEER?addClass(e,"code-peg-holder-6pegs"):addClass(e,"code-peg-holder-4pegs"),t.appendChild(e);const n=createDiv();updateBackgroundColor(n,emptyPegColor),e.appendChild(n),currentRowCodePegs.push(n)}const a=createDiv();addClass(a,"feedback-holder"),e.appendChild(a);const d=createDiv();a.appendChild(d);let s=2;game.difficultyLevel==Difficulty.ENGINEER&&(s=3);for(let e=0;e<2;e++){const e=createDiv();d.appendChild(e);for(let n=0;n<s;n++){const n=createDiv();addClass(n,"key-peg-holder"),e.appendChild(n),currentRowKeyPegsHolder.push(n)}}musicStatus||(soundImg.src="images/mute.png")}function onClickCodePeg(e){let n=!0;for(let o=0;o<currentRowCodePegs.length;o++){if(game.difficultyLevel==Difficulty.BEGINNER&&currentRowCodePegs[o].style.backgroundColor==e){showDialog(!0,"Duplicates not allowed in Beginner level"),n=!1;break}if(currentRowCodePegs[o].style.backgroundColor==emptyPegColor){updateBackgroundColor(currentRowCodePegs[o],e),n=!1;break}}n&&showDialog(!0,"All pegs are filled")}function showDialog(e,n){e&&(updateContentText(dialogBody,n),displayFlex(dialogBox),setTimeout(function(){closeDialog()},2e3))}function closeDialog(){updateContentText(dialogBody,""),displayNone(dialogBox)}function decode(){game.attempt++,setupInitialGuessRow(),guesses.scrollTop=0,game.isGameOver()&&(decodeBtn.disabled=!0,clearBtn.disabled=!0)}function clearRow(){currentRowCodePegs.forEach(function(e){updateBackgroundColor(e,emptyPegColor)})}function toggleSound(){musicStatus?(musicStatus=!1,backgroundMusic.load(),soundImg.src="images/mute.png"):(musicStatus=!0,backgroundMusic.play(),soundImg.src="images/unmute.png")}function adjustGuessesHeight(){const e=window.outerHeight;guesses.style.maxHeight=e<750?e-283+"px":"465px"}function check(){const e=[];for(let n=0;n<game.codeMaker.length;n++)e.push(Colors[Math.floor(Math.random()*Colors.length)]);game.currentCodeBreakerPattern=e;const n=getId("game"),o=document.createElement("TR"),t=document.createElement("TD");addClass(t,"turns"),t.innerHTML=game.attempt,o.appendChild(t);const a=document.createElement("TD");for(let n=0;n<e.length;n++){const o=createDiv();addClass(o,"box"),o.style.backgroundColor=e[n],a.appendChild(o)}o.appendChild(a);game.codeMaker[0],game.codeMaker[1],game.codeMaker[2],game.codeMaker[3];const d=game.getFeedback();game.attempt++;const s=document.createElement("TD");for(let e=0;e<d.length;e++){const n=createDiv();addClass(n,"peg"),n.style.backgroundColor=d[e],s.appendChild(n)}o.appendChild(s),n.appendChild(o),game.isGameOver()&&(getId("gs").innerHTML+="Game Over",getId("check").disabled=!0)}let welcomeMenu,mainMenu,newGameMenu,optionsMenu,creditsMenu,soundOnBtn,soundOffBtn,menuScreen,gameScreen,dialogBox,game,codeMakerPalette,soundImg,guesses,decodeBtn,clearBtn,dialogBody,musicStatus=!0;const backgroundMusic=new Audio("sounds/Dreaming.ogg"),textColor="#ccc",textColorDisabled="red";window.onload=function(){welcomeMenu=getId("welcome-menu"),mainMenu=getId("main-menu"),newGameMenu=getId("new-game-menu"),optionsMenu=getId("options-menu"),creditsMenu=getId("credits-menu"),menuScreen=getId("menu-screen"),gameScreen=getId("game-screen"),dialogBox=getId("dialog-box"),soundOnBtn=getId("sound-on-btn"),soundOffBtn=getId("sound-off-btn"),codeMakerPalette=getId("code-maker-palette"),soundImg=getId("game-sound-btn"),guesses=getId("guesses"),decodeBtn=getId("decode-btn"),clearBtn=getId("clear-btn"),dialogBody=getId("dialog-body"),displayNone(mainMenu),displayNone(newGameMenu),displayNone(optionsMenu),displayNone(creditsMenu),displayNone(gameScreen),displayNone(dialogBox),displayFlex(document.getElementsByTagName("main")[0]),backgroundMusic.preload="auto",adjustGuessesHeight(),displayNone(menuScreen),displayBlock(gameScreen),game=new Game(Difficulty.BEGINNER),setupGameScreen()},window.onresize=function(){setTimeout(adjustGuessesHeight(),100)};let currentRowCodePegs=[],currentRowKeyPegsHolder=[],emptyPegColor="rgba(0, 0, 0, 0)";