function getId(e){return document.getElementById(e)}function createDiv(){return document.createElement("DIV")}function displayNone(e){e.style.display="none"}function displayBlock(e){e.style.display="block"}function displayFlex(e){e.style.display="flex"}function addClass(e,t){e.classList.add(t)}function updateBackgroundColor(e,t){e.style.backgroundColor=t}function updateContentText(e,t){e.textContent=t}function updateSoundUiOn(){soundOffBtn.style.color=textColor,soundOffBtn.style.cursor="pointer",soundOnBtn.style.color=textColorDisabled,soundOnBtn.style.cursor="default"}function updateSoundUiOff(){soundOnBtn.style.color=textColor,soundOnBtn.style.cursor="pointer",soundOffBtn.style.color=textColorDisabled,soundOffBtn.style.cursor="default"}function play(){displayNone(welcomeMenu),displayBlock(mainMenu),backgroundMusic.loop=!0,backgroundMusic.play()}function newGame(){displayNone(mainMenu),displayBlock(newGameMenu)}function options(){displayNone(mainMenu),displayBlock(optionsMenu),musicStatus?updateSoundUiOn():updateSoundUiOff()}function credits(){displayNone(mainMenu),displayBlock(creditsMenu)}function back(){displayNone(newGameMenu),displayNone(optionsMenu),displayNone(creditsMenu),displayBlock(mainMenu)}function soundOn(){musicStatus||(updateSoundUiOn(),musicStatus=!0,backgroundMusic.play())}function soundOff(){musicStatus&&(updateSoundUiOff(),musicStatus=!1,backgroundMusic.load())}function startGame(e){game=new Game(e),back(),displayNone(menuScreen),displayBlock(gameScreen),setupGameScreen()}function setupGameScreen(){soundImg.src=musicStatus?"images/unmute.png":"images/mute.png";for(let e=0;e<game.codeMaker.length;e++){const t=createDiv();addClass(t,"code-maker-color-peg"),updateBackgroundColor(t,game.codeMaker[e]),codeMakerPalette.appendChild(t),codeMakerCodePegs.push(t)}setupInitialGuessRow()}function setupInitialGuessRow(){currentRowCodePegs=[],currentRowKeyPegsHolder=[],game.currentCodeBreakerPattern=[];const e=createDiv();addClass(e,"row"),guesses.prepend(e),guessCodeRows.push(e);const t=createDiv();addClass(t,"attempt-number"),e.appendChild(t);const o=createDiv();o.textContent=game.attempt,t.appendChild(o);const a=createDiv();addClass(a,"guess-palette"),e.appendChild(a);for(let e=0;e<game.codeMaker.length;e++){const e=createDiv();game.difficultyLevel==Difficulty.ENGINEER?addClass(e,"code-peg-holder-6pegs"):addClass(e,"code-peg-holder-4pegs"),a.appendChild(e);const t=createDiv();updateBackgroundColor(t,emptyPegColor),e.appendChild(t),currentRowCodePegs.push(t)}const n=createDiv();addClass(n,"feedback-holder"),e.appendChild(n);const s=createDiv();n.appendChild(s);let d=2;game.difficultyLevel==Difficulty.ENGINEER&&(d=3);for(let e=0;e<2;e++){const e=createDiv();s.appendChild(e);for(let t=0;t<d;t++){const t=createDiv();addClass(t,"key-peg-holder"),e.appendChild(t),currentRowKeyPegsHolder.push(t)}}}function onClickCodePeg(e){let t=!0;for(let o=0;o<currentRowCodePegs.length;o++){if(game.difficultyLevel==Difficulty.BEGINNER&&currentRowCodePegs[o].style.backgroundColor==e){showDialog(DialogCases.DUPLICATES),t=!1;break}if(currentRowCodePegs[o].style.backgroundColor==emptyPegColor){updateBackgroundColor(currentRowCodePegs[o],e),game.currentCodeBreakerPattern.push(e),t=!1;break}}t&&showDialog(DialogCases.PEGS_FILLED)}function decode(){let e=!0;for(let t=0;t<currentRowCodePegs.length;t++)currentRowCodePegs[t].style.backgroundColor==emptyPegColor&&(e=!1);if(e){const e=game.getFeedback();for(let t=0;t<e.length;t++){const o=createDiv();updateBackgroundColor(o,e[t]),currentRowKeyPegsHolder[t].appendChild(o)}game.isGameOver()&&game.userWon?(displayNone(codeMakerPaletteOverlay),showDialog(DialogCases.GAME_OVER_WIN)):game.isGameOver()&&!game.userWon?(displayNone(codeMakerPaletteOverlay),showDialog(DialogCases.GAME_OVER_LOSE)):(game.attempt++,setupInitialGuessRow(),guesses.scrollTop=0)}else showDialog(DialogCases.PEG_NOT_FILLED)}function clearRow(){currentRowCodePegs.forEach(function(e){updateBackgroundColor(e,emptyPegColor)}),game.currentCodeBreakerPattern=[]}function toggleSound(){musicStatus?(musicStatus=!1,backgroundMusic.load(),soundImg.src="images/mute.png"):(musicStatus=!0,backgroundMusic.play(),soundImg.src="images/unmute.png")}function onClickQuitButton(){showDialog(DialogCases.QUIT_GAME)}function onClickRestartButton(){showDialog(DialogCases.RESTART_GAME)}function adjustGuessesHeight(){const e=window.outerHeight;guesses.style.maxHeight=e<750?e-283+"px":"465px"}function showDialog(e){switch(updateContentText(dialogBody,e),displayFlex(dialogBox),e){case DialogCases.RESTART_GAME:updateContentText(dialogTitle,"Restart"),updateContentText(dialogRestartBtn,"Yes"),displayBlock(dialogHeader),displayNone(dialogQuitBtn),displayBlock(dialogRestartBtn),displayFlex(dialogButtons);break;case DialogCases.QUIT_GAME:updateContentText(dialogTitle,"Quit"),updateContentText(dialogQuitBtn,"Yes"),displayBlock(dialogHeader),displayBlock(dialogQuitBtn),displayNone(dialogRestartBtn),displayFlex(dialogButtons);break;case DialogCases.GAME_OVER_WIN:case DialogCases.GAME_OVER_LOSE:updateContentText(dialogTitle,"Game Over"),updateContentText(dialogQuitBtn,"Menu"),updateContentText(dialogRestartBtn,"Restart"),displayNone(dialogCloseBtn),displayBlock(dialogHeader),displayBlock(dialogRestartBtn),displayBlock(dialogQuitBtn),displayFlex(dialogButtons);break;default:setTimeout(function(){closeDialog()},1500)}}function closeDialog(){updateContentText(dialogTitle,""),updateContentText(dialogBody,""),updateContentText(dialogQuitBtn,""),updateContentText(dialogRestartBtn,""),displayNone(dialogBox),displayBlock(dialogCloseBtn),displayNone(dialogHeader),displayNone(dialogRestartBtn),displayNone(dialogQuitBtn),displayNone(dialogButtons)}function resetGameScreen(){displayBlock(codeMakerPaletteOverlay);for(let e=0;e<codeMakerCodePegs.length;e++)codeMakerCodePegs[e].remove();for(let e=0;e<guessCodeRows.length;e++)guessCodeRows[e].remove()}function restartGame(){console.log("restart game"),resetGameScreen();const e=game.difficultyLevel;game=new Game(e),setupGameScreen(),closeDialog()}function quitGame(){console.log("quit game"),resetGameScreen(),closeDialog(),displayBlock(menuScreen),displayNone(gameScreen)}let welcomeMenu,mainMenu,newGameMenu,optionsMenu,creditsMenu,soundOnBtn,soundOffBtn,menuScreen,gameScreen,dialogBox,game,codeMakerPalette,codeMakerPaletteOverlay,soundImg,guesses,decodeBtn,clearBtn,dialogHeader,dialogTitle,dialogCloseBtn,dialogBody,dialogButtons,dialogRestartBtn,dialogQuitBtn,codeMakerCodePegs=[],guessCodeRows=[],currentRowCodePegs=[],currentRowKeyPegsHolder=[],emptyPegColor="rgba(0, 0, 0, 0)",textColor="",musicStatus=!0;const backgroundMusic=new Audio("sounds/Dreaming.ogg"),textColorDisabled="red",DialogCases={PEGS_FILLED:"All pegs are filled",PEG_NOT_FILLED:"All pegs must be filled",DUPLICATES:"Duplicates are not allowed in Beginner level",GAME_OVER_WIN:"Congrats! You have decoded the pattern successfully",GAME_OVER_LOSE:"You have failed to decode the pattern",RESTART_GAME:"Are you sure you want to restart the game?",QUIT_GAME:"Are you sure sure you want to quit the game?"};window.onload=function(){welcomeMenu=getId("welcome-menu"),mainMenu=getId("main-menu"),newGameMenu=getId("new-game-menu"),optionsMenu=getId("options-menu"),creditsMenu=getId("credits-menu"),menuScreen=getId("menu-screen"),gameScreen=getId("game-screen"),dialogBox=getId("dialog-box"),soundOnBtn=getId("sound-on-btn"),soundOffBtn=getId("sound-off-btn"),codeMakerPalette=getId("code-maker-palette"),codeMakerPaletteOverlay=getId("code-maker-palette-overlay"),soundImg=getId("game-sound-btn"),guesses=getId("guesses"),decodeBtn=getId("decode-btn"),clearBtn=getId("clear-btn"),dialogHeader=getId("dialog-header"),dialogTitle=getId("dialog-title"),dialogCloseBtn=getId("dialog-close-btn"),dialogBody=getId("dialog-body"),dialogButtons=getId("dialog-buttons"),dialogRestartBtn=getId("dialog-restart-btn"),dialogQuitBtn=getId("dialog-quit-btn"),displayNone(mainMenu),displayNone(newGameMenu),displayNone(optionsMenu),displayNone(creditsMenu),displayNone(gameScreen),displayNone(dialogBox),displayFlex(document.getElementsByTagName("main")[0]),textColor=document.getElementsByTagName("body")[0].style.color,backgroundMusic.preload="auto",adjustGuessesHeight()},window.onresize=function(){setTimeout(adjustGuessesHeight(),100)};